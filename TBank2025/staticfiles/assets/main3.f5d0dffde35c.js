import{d as x,u as w,a as V,r as u,l as h,c as _,w as l,e as t,f as n,g as k,i as s,j as C,k as K,b as S,o as M}from"./main.js";import{V as N,b as B,c as m,d as f,r as a,a as R}from"./main6.js";import{V as U,a as y}from"./main7.js";const j={class:"mt-8 d-flex justify-end"},I=x({__name:"SetupView",setup(q){const d=w(),p=V(),g=S(),i=u(!1),v=u(),o=u({current_savings:0,monthly_savings:0,monthly_spendings:0});h(()=>{o.value.current_savings=d.current_savings,o.value.monthly_savings=d.monthly_savings,o.value.monthly_spendings=d.monthly_spendings});const c=async()=>{const{valid:b}=await v.value.validate();if(b){i.value=!0;try{await d.updateProfile(o.value),g.push("/dashboard"),p.notify("Профиль сохранен","success")}catch{p.notify("Ошибка сохранения","error")}finally{i.value=!1}}};return(b,e)=>(M(),_(N,{class:"fill-height justify-center bg-background"},{default:l(()=>[t(R,{width:"600",class:"pa-8 rounded-xl",elevation:"0"},{default:l(()=>[e[7]||(e[7]=n("div",{class:"mb-6"},[n("h1",{class:"text-h4 font-weight-bold text-secondary mb-2"}," Финансовый профиль "),n("p",{class:"text-body-1 text-grey-darken-1"}," Укажите ваши базовые показатели (строго положительные числа). ")],-1)),t(B,{ref_key:"formRef",ref:v,onSubmit:k(c,["prevent"])},{default:l(()=>[t(U,null,{default:l(()=>[t(y,{cols:"12"},{default:l(()=>[e[3]||(e[3]=n("p",{class:"text-body-2 font-weight-bold text-secondary mb-2"}," Текущие накопления (₽) ",-1)),t(m,{modelValue:o.value.current_savings,"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.current_savings=r),modelModifiers:{number:!0},placeholder:"0",type:"number",min:"0",variant:"outlined",rounded:"xl","bg-color":"white",rules:[s(a).required,s(a).positive],onKeydown:s(f)},null,8,["modelValue","rules","onKeydown"])]),_:1}),t(y,{cols:"12",md:"6"},{default:l(()=>[e[4]||(e[4]=n("p",{class:"text-body-2 font-weight-bold text-secondary mb-2"}," Откладываю в месяц (₽) ",-1)),t(m,{modelValue:o.value.monthly_savings,"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.monthly_savings=r),modelModifiers:{number:!0},placeholder:"0",type:"number",min:"0",variant:"outlined",rounded:"xl","bg-color":"white",rules:[s(a).required,s(a).positive],onKeydown:s(f)},null,8,["modelValue","rules","onKeydown"])]),_:1}),t(y,{cols:"12",md:"6"},{default:l(()=>[e[5]||(e[5]=n("p",{class:"text-body-2 font-weight-bold text-secondary mb-2"}," Обязательные траты (₽) ",-1)),t(m,{modelValue:o.value.monthly_spendings,"onUpdate:modelValue":e[2]||(e[2]=r=>o.value.monthly_spendings=r),modelModifiers:{number:!0},placeholder:"0",type:"number",min:"0",variant:"outlined",rounded:"xl","bg-color":"white",rules:[s(a).required,s(a).positive],onKeydown:s(f)},null,8,["modelValue","rules","onKeydown"])]),_:1})]),_:1}),n("div",j,[t(C,{type:"submit",color:"primary",size:"x-large",class:"px-8 text-on-primary font-weight-bold",loading:i.value},{default:l(()=>[...e[6]||(e[6]=[K(" Сохранить ",-1)])]),_:1},8,["loading"])])]),_:1},512)]),_:1})]),_:1}))}});export{I as default};
