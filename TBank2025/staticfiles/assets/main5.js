import{p as ee,q as te,ab as R,av as le,r as b,aw as ae,a2 as q,ax as oe,C as se,ay as ne,e as t,Q as B,R as ie,f as a,D as E,E as U,az as re,aA as de,as as ue,aB as me,ar as ce,X as ve,d as fe,u as ye,a as ge,l as be,c as pe,w as n,g as Ve,i as c,aC as we,j as A,k as M,b as xe,o as he}from"./main.js";import{u as ke,e as O,m as _e,V as Ce,a as Se,b as Fe,c as y,r as g,d as z}from"./main6.js";import{a as v,V as F}from"./main7.js";import{c as D,d as Pe,a as Ie,_ as Re}from"./main8.js";const qe=te({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},..._e(),...Pe()},"VSwitch"),Be=ee()({name:"VSwitch",inheritAttrs:!1,props:qe(),emits:{"update:focused":o=>!0,"update:modelValue":o=>!0,"update:indeterminate":o=>!0},setup(o,r){let{attrs:p,slots:i}=r;const d=R(o,"indeterminate"),u=R(o,"modelValue"),{loaderClasses:x}=le(o),{isFocused:l,focus:h,blur:V}=ke(o),e=b(),s=b(),P=ae&&window.matchMedia("(forced-colors: active)").matches,T=q(()=>typeof o.loading=="string"&&o.loading!==""?o.loading:o.color),N=oe(),j=q(()=>o.id||`switch-${N}`);function K(){d.value&&(d.value=!1)}function L(w){w.stopPropagation(),w.preventDefault(),e.value?.input?.click()}return se(()=>{const[w,H]=ne(p),Q=O.filterProps(o),X=D.filterProps(o);return t(O,B({ref:s,class:["v-switch",{"v-switch--flat":o.flat},{"v-switch--inset":o.inset},{"v-switch--indeterminate":d.value},x.value,o.class]},w,Q,{modelValue:u.value,"onUpdate:modelValue":k=>u.value=k,id:j.value,focused:l.value,style:o.style}),{...i,default:k=>{let{id:$,messagesId:G,isDisabled:J,isReadonly:W,isValid:I}=k;const _={model:u,isValid:I};return t(D,B({ref:e},X,{modelValue:u.value,"onUpdate:modelValue":[f=>u.value=f,K],id:$.value,"aria-describedby":G.value,type:"checkbox","aria-checked":d.value?"mixed":void 0,disabled:J.value,readonly:W.value,onFocus:h,onBlur:V},H),{...i,default:f=>{let{backgroundColorClasses:C,backgroundColorStyles:m}=f;return a("div",{class:U(["v-switch__track",P?void 0:C.value]),style:E(m.value),onClick:L},[i["track-true"]&&a("div",{key:"prepend",class:"v-switch__track-true"},[i["track-true"](_)]),i["track-false"]&&a("div",{key:"append",class:"v-switch__track-false"},[i["track-false"](_)])])},input:f=>{let{inputNode:C,icon:m,backgroundColorClasses:Y,backgroundColorStyles:Z}=f;return a(ve,null,[C,a("div",{class:U(["v-switch__thumb",{"v-switch__thumb--filled":m||o.loading},o.inset||P?void 0:Y.value]),style:E(o.inset?void 0:Z.value)},[i.thumb?t(re,{defaults:{VIcon:{icon:m,size:"x-small"}}},{default:()=>[i.thumb({..._,icon:m})]}):t(de,null,{default:()=>[o.loading?t(me,{name:"v-switch",active:!0,color:I.value===!1?void 0:T.value},{default:S=>i.loader?i.loader(S):t(ce,{active:S.isActive,color:S.color,indeterminate:!0,size:"16",width:"2"},null)}):m&&t(ue,{key:String(m),icon:m,size:"x-small"},null)]})])])}})}})}),ie({},s)}}),Ee={class:"mb-8"},Ue={class:"mb-8"},Ae={class:"mb-8"},Me={class:"d-flex flex-column gap-4"},Oe={class:"d-flex align-center justify-space-between py-2"},ze={class:"py-2"},De={class:"d-flex justify-end ga-4 mt-4"},Te=fe({__name:"SettingsView",setup(o){const r=ye(),p=ge(),i=xe(),d=b(!1),u=b(),x=[{title:"Не присылать",value:"none"},{title:"Ежедневно",value:"daily"},{title:"Еженедельно",value:"weekly"},{title:"Ежемесячно",value:"monthly"}],l=b({email:"",telegram:"",current_savings:0,monthly_savings:0,notifyOnEnd:!0,reportFrequency:"none"});be(()=>{l.value.current_savings=r.current_savings,l.value.monthly_savings=r.monthly_savings,l.value.email=r.settings.email,l.value.telegram=r.settings.telegram,l.value.notifyOnEnd=r.settings.notifyOnEnd,l.value.reportFrequency=r.settings.reportFrequency||"none"});const h=async()=>{const{valid:V}=await u.value.validate();if(V){d.value=!0;try{await r.updateProfile({current_savings:l.value.current_savings,monthly_savings:l.value.monthly_savings,notifyOnEnd:l.value.notifyOnEnd,reportFrequency:l.value.reportFrequency,email:l.value.email,telegram:l.value.telegram}),p.notify("Настройки успешно сохранены!","success"),i.push("/dashboard")}catch{p.notify("Ошибка при сохранении настроек","error")}finally{d.value=!1}}};return(V,e)=>(he(),pe(Ce,{class:"fill-height align-start bg-background pa-8"},{default:n(()=>[t(F,{justify:"center"},{default:n(()=>[t(v,{cols:"12",md:"8",lg:"6"},{default:n(()=>[e[18]||(e[18]=a("div",{class:"mb-6"},[a("h1",{class:"text-h4 font-weight-bold text-secondary mb-2"}," Настройки ")],-1)),t(Se,{class:"pa-6 rounded-xl",elevation:"0"},{default:n(()=>[t(Fe,{ref_key:"formRef",ref:u,onSubmit:Ve(h,["prevent"])},{default:n(()=>[a("section",Ee,[e[9]||(e[9]=a("h2",{class:"text-h6 font-weight-bold text-secondary mb-4 pb-2 border-b"}," Личные данные ",-1)),t(F,null,{default:n(()=>[t(v,{cols:"12"},{default:n(()=>[e[6]||(e[6]=a("p",{class:"text-body-2 font-weight-bold text-secondary mb-2"}," Никнейм ",-1)),t(y,{"model-value":c(r).nickname,readonly:"",variant:"outlined",rounded:"xl","bg-color":"grey-lighten-4","hide-details":""},null,8,["model-value"])]),_:1}),t(v,{cols:"12",md:"6"},{default:n(()=>[e[7]||(e[7]=a("p",{class:"text-body-2 font-weight-bold text-secondary mb-2"}," Email ",-1)),t(y,{modelValue:l.value.email,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.email=s),placeholder:"name@example.com",variant:"outlined",rounded:"xl","bg-color":"white",rules:[c(g).email]},null,8,["modelValue","rules"])]),_:1}),t(v,{cols:"12",md:"6"},{default:n(()=>[e[8]||(e[8]=a("p",{class:"text-body-2 font-weight-bold text-secondary mb-2"}," Telegram ID ",-1)),t(y,{modelValue:l.value.telegram,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.telegram=s),placeholder:"@username",variant:"outlined",rounded:"xl","bg-color":"white","hide-details":"auto"},null,8,["modelValue"])]),_:1})]),_:1})]),a("section",Ue,[e[12]||(e[12]=a("h2",{class:"text-h6 font-weight-bold text-secondary mb-4 pb-2 border-b"}," Финансы ",-1)),t(F,null,{default:n(()=>[t(v,{cols:"12",md:"6"},{default:n(()=>[e[10]||(e[10]=a("p",{class:"text-body-2 font-weight-bold text-secondary mb-2"}," Текущие накопления ",-1)),t(y,{modelValue:l.value.current_savings,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.current_savings=s),modelModifiers:{number:!0},type:"number",variant:"outlined",rounded:"xl","bg-color":"white",suffix:"₽",rules:[c(g).required,c(g).positive],onKeydown:c(z)},null,8,["modelValue","rules","onKeydown"])]),_:1}),t(v,{cols:"12",md:"6"},{default:n(()=>[e[11]||(e[11]=a("p",{class:"text-body-2 font-weight-bold text-secondary mb-2"}," Откладываю в месяц ",-1)),t(y,{modelValue:l.value.monthly_savings,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.monthly_savings=s),modelModifiers:{number:!0},type:"number",variant:"outlined",rounded:"xl","bg-color":"white",suffix:"₽",rules:[c(g).required,c(g).positive],onKeydown:c(z)},null,8,["modelValue","rules","onKeydown"])]),_:1})]),_:1})]),a("section",Ae,[e[15]||(e[15]=a("h2",{class:"text-h6 font-weight-bold text-secondary mb-4 pb-2 border-b"}," Уведомления и Отчеты ",-1)),a("div",Me,[a("div",Oe,[e[13]||(e[13]=a("span",{class:"text-body-1 font-weight-medium"},"Уведомлять об окончании таймера",-1)),t(Be,{modelValue:l.value.notifyOnEnd,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.notifyOnEnd=s),color:"primary","hide-details":"",inset:"",density:"compact"},null,8,["modelValue"])]),t(we),a("div",ze,[e[14]||(e[14]=a("p",{class:"text-body-1 font-weight-medium mb-3"}," Финансовый отчет ",-1)),t(Ie,{modelValue:l.value.reportFrequency,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.reportFrequency=s),items:x,"item-title":"title","item-value":"value",variant:"outlined",rounded:"xl","bg-color":"white","hide-details":"",density:"comfortable",color:"primary","menu-icon":"mdi-chevron-down"},null,8,["modelValue"])])])]),a("div",De,[t(A,{variant:"text",size:"large",to:"/dashboard",rounded:"xl"},{default:n(()=>[...e[16]||(e[16]=[M("Отмена",-1)])]),_:1}),t(A,{type:"submit",color:"primary",size:"large",loading:d.value,elevation:"0",class:"text-on-primary font-weight-bold px-8",rounded:"xl"},{default:n(()=>[...e[17]||(e[17]=[M("Сохранить",-1)])]),_:1},8,["loading"])])]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}))}}),He=Re(Te,[["__scopeId","data-v-82ce0129"]]);export{He as default};
